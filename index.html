<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Birthday, my love! üéâ</title>
  <meta name="description" content="made with ‚ù§Ô∏è by Luc√≠a." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéÇ</text></svg>">
 <link rel="preconnect" href="https://fonts.googleapis.com"> 
 <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
 <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
 
  <style>
  :root{
    /* ‚Äî‚Äî Olive + Sage (dark theme) ‚Äî‚Äî */
    --bg:    #0f1411;          /* deep green-black */
    --card:  #121a15;          /* card panels */
    --text:  #edf3ea;          /* main text (very light sage) */
    --muted: #a9b5a8;          /* secondary text */
    --brand: #7c8b4d;          /* olive */
    --brand-2:#b7c7a6;         /* sage accent */
    --shadow: 0 10px 25px rgba(0,0,0,.35);
    --radius: 18px;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    /* Prefer Century Gothic if present, else our web fonts/fallbacks */
    font-family: "Century Gothic","DM Sans", system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
    background:
      radial-gradient(1200px 800px at 12% -10%, rgba(124,139,77,.28), transparent 60%),
      radial-gradient(1200px 800px at 88% -10%, rgba(183,199,166,.20), transparent 60%),
      var(--bg);
    color:var(--text);
  }

  a{color:var(--brand-2)}
  .wrap{max-width:1000px; margin:0 auto; padding:28px;}

  header{
    position:sticky; top:0; z-index:10; backdrop-filter: blur(8px);
    background: linear-gradient(180deg, rgba(15,20,17,.92), rgba(15,20,17,.65));
    border-bottom: 1px solid rgba(255,255,255,.06);
  }

  .nav{display:flex; align-items:center; gap:14px;}
  .logo{display:flex; align-items:center; gap:10px; font-weight:700}
  .logo-badge{
    width:34px; height:34px; border-radius:10px; display:grid; place-items:center;
    background: linear-gradient(135deg, var(--brand), var(--brand-2)); box-shadow:var(--shadow)
  }

  .tabs{display:flex; gap:8px; flex-wrap:wrap; margin-left:auto}
  .tab{
    appearance:none; border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.03);
    color:var(--text); padding:8px 12px; border-radius:12px; cursor:pointer; transition:.2s
  }
  .tab[aria-current="page"], .tab:hover{
    border-color: rgba(183,199,166,.35); background: rgba(183,199,166,.10)
  }

  .hero{margin:24px 0 16px; display:grid; grid-template-columns: 1.1fr .9fr; gap:18px}
  @media (max-width:860px){ .hero{grid-template-columns:1fr} }

  .card{
    background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    border:1px solid rgba(255,255,255,.08); padding:18px; border-radius:var(--radius); box-shadow:var(--shadow)
  }

  /* Headings use a Century-Gothic look via Montserrat fallback */
  .title,h1,h2,h3{
    font-family:"Century Gothic","Montserrat","DM Sans",system-ui,-apple-system,"Segoe UI",Arial,sans-serif;
    letter-spacing:.2px;
  }
  .title{font-size: clamp(24px, 4vw, 42px); margin:0 0 6px}
  .subtitle{color:var(--muted); margin-top:0}

  .grid{display:grid; grid-template-columns: repeat(12, 1fr); gap:12px}
  .col-12{grid-column: span 12}
  .col-6{grid-column: span 6}
  @media (max-width:760px){ .col-6{grid-column: span 12} }

  .btn{
    display:inline-flex; align-items:center; gap:8px;
    border:1px solid rgba(183,199,166,.28);
    padding:10px 14px; border-radius:12px;
    background:rgba(183,199,166,.10); color:var(--text);
    text-decoration:none; cursor:pointer; transition:.2s
  }
  .btn:hover{ background: rgba(183,199,166,.18) }

  .pill{
    display:inline-block; padding:6px 10px; border-radius:999px;
    background: rgba(124,139,77,.18);
    border:1px solid rgba(124,139,77,.40);
    color:#e7f0da; font-size:12px
  }
    
/* Make native controls use the site font & colors */
button, input, select, textarea {
  font: inherit;
  color: inherit;
}

/* Neutralize default button look across browsers */
.btn {
  -webkit-appearance: none;
  appearance: none;
  font-weight: 600;         /* gives the button a nice emphasis */
  letter-spacing: .2px;
}

  /* ‚Äî‚Äî Masonry gallery (responsive) ‚Äî‚Äî */
  .gallery{ column-count: 2; column-gap: 12px; }
  @media (max-width: 640px){ .gallery{ column-count: 1; } }
  @media (min-width: 1100px){ .gallery{ column-count: 3; } }

  .gallery-item{
    break-inside: avoid; -webkit-column-break-inside: avoid; -moz-column-break-inside: avoid;
    margin-bottom: 12px;
  }
  .gallery img{
    width: 100%; height: auto; display: block; object-fit: cover;
    border-radius: 14px; border: 1px solid rgba(255,255,255,.08);
  }
/* Fade-in for gallery images */
.gallery img{
  opacity: 0;
  transform: translateY(6px);
  transition: opacity .5s ease, transform .5s ease;
}
.gallery img.is-visible{
  opacity: 1;
  transform: none;
}

  footer{opacity:.7; text-align:center; padding:30px}
  .hide{display:none}

/* Dim and disable tabs while the site is locked */
#tabs.locked .tab{
  pointer-events: none;
  opacity: .5;
  filter: grayscale(.2);
}
    /* ‚Äî‚Äî‚Äî Micro animations for the Presents button ‚Äî‚Äî‚Äî */
.btn.fancy {
  position: relative;
  overflow: hidden;               /* needed for ripple */
  transform: translateZ(0);       /* enable GPU */
  transition: transform .08s ease;
}

/* soft pulse to invite a click */
.btn.fancy.pulse {
  animation: btn-breathe 2.2s ease-in-out infinite;
}

@keyframes btn-breathe {
  0%, 100% { box-shadow: 0 0 0 rgba(183,199,166,0); }
  50%      { box-shadow: 0 0 0 6px rgba(183,199,166,.12); }
}

/* tiny tilt on hover */
.btn.fancy:hover {
  transform: translateY(-1px) rotate(-0.3deg);
}

/* pop on click */
.btn.fancy:active {
  transform: scale(0.98);
}

/* ripple element */
.btn.fancy .ripple {
  position: absolute;
  border-radius: 999px;
  inset: 0;
  margin: auto;
  width: 6px;
  height: 6px;
  opacity: 0;
  background: radial-gradient(circle, rgba(183,199,166,.35), rgba(183,199,166,0) 60%);
  transform: scale(1);
  pointer-events: none;
  animation: ripple-pop .5s ease-out;
}

@keyframes ripple-pop {
  from { opacity: .35; transform: scale(1); }
  to   { opacity: 0;   transform: scale(18); }
}

/* ‚Äî‚Äî‚Äî Quiz styles ‚Äî‚Äî‚Äî */
.quiz-card{
  grid-column: span 12;
  border: 1px solid rgba(255,255,255,.08);
  border-radius: var(--radius);
  padding: 14px;
  background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
  box-shadow: var(--shadow);
  margin-bottom: 10px;
}
.quiz-q{ margin: 0 0 8px; font-weight: 600; }
.quiz-options{ display: grid; gap: 8px; }
.quiz-option{
  display: flex; align-items: center; justify-content: space-between;
  border: 1px solid rgba(183,199,166,.28);
  background: rgba(183,199,166,.08);
  padding: 10px 12px; border-radius: 12px; cursor: pointer;
  transition: .15s;
}
.quiz-option:hover{ background: rgba(183,199,166,.14); }
.quiz-option.correct{
  border-color: rgba(112,225,210,.5);
  background: rgba(112,225,210,.12);
}
.quiz-option.wrong{
  border-color: rgba(255,64,64,.4);
  background: rgba(255,64,64,.08);
}
.quiz-explain{ margin: 8px 0 0; color: var(--muted); font-size: 0.95em; }

  
</style>

</head>
<body>
  <header>
    <div class="wrap nav">
      <div class="logo">
        <div class="logo-badge">üéâ</div>
        <div>Matt‚Äôs <span style="color:var(--brand)">Birthday</span></div>
      </div>
      <nav class="tabs" aria-label="Main" id="tabs">
        <a class="tab" href="#home">Home</a>
        <a class="tab" href="#timeline">Timeline</a>
        <a class="tab" href="#memories">Memories</a>
        <a class="tab" href="#messages">Messages</a>
        <a class="tab" href="#facts">Quiz</a>
        <a class="tab" href="#presents">Presents</a>
        <a class="tab" href="#cookies">Fortune cookies</a>
        <a class="tab" href="#future">To be continued...</a>
        <a class="tab" href="#about">About</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <!-- BIRTHDAY GATE (shown before the date) -->
    <section id="gate" class="view">
      <div class="card">
        <p class="pill">Open on the 23rd! </p>
        <h1 class="title" style="margin-top:6px">Not yet‚Ä¶ but almost!</h1>
        <p class="subtitle">Come back on the <strong>23rd September</strong> to see your surprise site (sorpresita jeje). Simple but cute-ish!</p>
        <div class="card" style="margin-top:14px">
          <h3 style="margin:.2rem 0 6px">Countdown</h3>
          <div id="gateCountdown" style="font-size:28px; margin:12px 0 4px">‚Äî</div>
          <p class="subtitle" style="margin-top:6px">Don't worry, this page will unlock automatically.</p>
        </div>
      </div>
    </section>

    <!-- HOME -->
    <section id="home" class="view hide">
      <div class="hero">
        <div class="card">
          <p class="pill">Surprise site</p>
          <h1 class="title">Happy 28th, pretty face! üßÅ</h1>
          <p class="subtitle">Here‚Äôs to another wonderful year ahead!</p>
          <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:14px">
            <button class="btn fancy pulse" id="confettiBtn">üéä Launch confetti</button>
            <a class="btn" href="#memories"> See some lovely memories</a>
            <a class="btn" href="#messages"> We just want to say... </a>
            <a class="btn" href="#facts"> Test yourself!</a>
             <a class="btn" href="#presents"> Before unwrapping</a>
          </div>
        </div>
        <div class="card">
          <h3>What is waiting for you here?</h3>
          <p class="subtitle">
           This site is my little surprise gift for you. Inside, you‚Äôll find a brief timeline of our years together, a collection of photos and memories, some birthday messages, a quiz full of random facts, and a game of fortune cookies. You‚Äôll also get a presents picker, so fate decides which gift you open first, and finally a small bucket list for the future that we‚Äôll keep building together. </p>
        </div>
      </div>
    </section>

    <!-- TIMELINE -->
    <section id="timeline" class="view hide">
      <div class="card">
        <h2>Timeline</h2>
        <div class="grid">
          <div class="col-6 card"><h3>2020 ‚Äî First nights together‚Ä¶</h3><p>Our story started here. It wasn‚Äôt the easiest of times, but somehow those first nights between parcels and face masks set the tone for us. We laughed through the mess and still had fun when it didn‚Äôt look perfect. Looking back, I‚Äôm glad we began this way! </p></div>
          <div class="col-6 card"><h3>2021 ‚Äî London</h3><p>Leeds gave us memories, but London gave us our own chapter. Moving here wasn‚Äôt simple, but we found our rhythm together. New places, new routines, and a new life that became ours. This was the year we really grew as a team.</p></div>
          <div class="col-6 card"><h3>2022 ‚Äî Leyton!</h3><p>We made a home out of Kallaxes and shared mornings. Combining our things wasn‚Äôt just furniture ‚Äî it was two lives blending. Our little flat became the first proper place that was truly ‚Äúus.‚Äù And it showed how well we fit together.</p></div>
          <div class="col-6 card"><h3>2023 ‚Äî More adventures</h3><p>This year was full of trips, long walks, and silly adventures. We said yes to more, discovered more, and kept laughing along the way. Even on quiet days, there was always something that made me feel lucky. 2023 was a year of making the most of every moment.</h3><p>We kept exploring and making the most of our days</p></div>
          <div class="col-6 card"><h3>2024 ‚Äî Casita</h3><p>The year we committed to something bigger than ourselves. Buying our casita wasn‚Äôt just a contract ‚Äî it was proof of how much we believe in us. I can already imagine the next years filling its rooms with love (and maybe a bit of chaos, a few wees, dust, plaster...). </p></div>
          <div class="col-6 card"><h3>2025 ‚Äî Maya</h3><p>The year we became three. Maya turned our house into a home full of little steps and wagging tails. She‚Äôs a challenge, a joy, and already one of the best things we‚Äôve done together. This year feels like the start of a whole new chapter.</p></div>
        </div>
      </div>
    </section>

    <!-- MEMORIES -->
    <section id="memories" class="view hide">
      <div class="card">
        <h2>Memories</h2>
        <div class="gallery" id="gallery"></div>
        <div id="gallery-sentinel" class="subtitle" style="text-align:center;margin-top:10px;">Loading more‚Ä¶</div>
      </div>
    </section>

    <!-- MESSAGES -->
    <section id="messages" class="view hide">
      <div class="card">
        <h2>Messages for you </h2>
        <p class="subtitle">A couple of notes from me (and Maya). They‚Äôre simple, but they come with love. Sometimes words feel small compared to what I want to say, but here are a few I didn‚Äôt want you to miss on your birthday. Maya didn't want to miss it either! </p>
        <div id="messageList" class="grid"></div>
      </div>
    </section>

    <!-- PRESENTS -->
    <section id="presents" class="view hide">
      <div class="card">
        <h2>Presents </h2>
        <p class="subtitle">Instead of choosing which gift to open first, this little game does it for you. Press the button and you‚Äôll get a random number (1 to 15), each one tied to a wrapped present waiting for you. It makes the whole unwrapping part a bit more fun, and definitely much easier! </p>
        <div style="display:flex; gap:10px; flex-wrap:wrap; margin:12px 0">
          <button class="btn fancy pulse" id="drawBtn">üé≤ Pick the next number</button>
          <button class="btn" id="resetBtn" title="Only for Luc√≠a">‚Ü∫ Reset (for Luc√≠a)</button>
        </div>
        <div class="card" style="margin-top:10px">
          <div><strong>Next number:</strong> <span id="currentPick" class="pill">‚Äî</span></div>
          <div style="margin-top:8px"><strong>Already opened:</strong> <span id="openedList" class="subtitle">‚Äî</span></div>
          <div style="margin-top:8px"><strong>Remaining:</strong> <span id="remainingCount" class="subtitle">15</span></div>
        </div>
      </div>
    </section>
    
<!-- QUIZ -->
<section id="facts" class="view hide">
  <div class="card">
    <h2>Random quiz</h2>
    <p class="subtitle">Ten random questions that mix facts about age, time, and the human body with some surprises. Nothing too serious, just a chance to test your guesses and learn a few numbers along the way. You only get one chance at each answer ‚Äî so choose wisely!</p>

    <div id="quizWrap" class="grid"></div>

    <div class="card" style="margin-top:12px; display:flex; gap:12px; align-items:center;">
      <strong>Score:</strong>
      <span id="quizScore" class="pill">0 / 0</span>
      <button id="quizReset" class="btn">‚Ü∫ Reset quiz</button>
    </div>
  </div>
</section>


      <!-- FORTUNE COOKIES -->
    <section id="cookies" class="view hide">
  <div class="card">
    <h2>Fortune cookies</h2>
    <p class="subtitle">
      Three cookies, three small fortunes made just for you. Pick one and it will crack open to reveal your message.
      They‚Äôre not serious predictions, I can't do that yet ‚Äî just a bit of fun.
    </p>

    <div style="display:flex; gap:10px; flex-wrap:wrap; margin:12px 0">
      <button class="btn cookie" data-msg="Maya says: today you earn 200 extra kisses">ü•† Cookie 1</button>
      <button class="btn cookie" data-msg="You may get a present today, lucky you!">ü•† Cookie 2</button>
      <button class="btn cookie" data-msg="Feeling lucky: buy a scratch card today; small luck is on our side.">ü•† Cookie 3</button>
      <button class="btn" id="cookiesReset" title="Reset fortunes">‚Ü∫ Reset</button>
    </div>

    <div class="card" style="margin-top:10px">
      <strong>Your fortune:</strong>
      <p id="fortuneText" class="subtitle" style="margin:.4rem 0 0">‚Äî</p>
    </div>
  </div>
</section>

 
    <!-- TO BE CONTINUED -->
   <section id="future" class="view hide">
  <div class="card">
    <h2>To be continued</h2>
    <p class="subtitle">
      We have lots of plans in mind ‚Äî this is just a small selection for us to keep in sight.
      I can‚Äôt wait to do these, and so much more, together.
    </p>

    <div class="grid">
      <div class="col-6 card">
        <h3>Road trip with Maya</h3>
        <p>Our little explorer in the back seat, us on the road, discovering new places together.</p>
        <img src="images/bucket_roadtrip.jpg" alt="Road trip with Maya" loading="lazy" style="width:100%;border-radius:12px;margin-top:8px;">
      </div>

      <div class="col-6 card">
        <h3>South America</h3>
        <p>Travelling together to a whole new continent ‚Äî food, culture, colours, and adventures waiting for us.</p>
        <img src="images/bucket_southamerica.jpg" alt="South America travel" loading="lazy" style="width:100%;border-radius:12px;margin-top:8px;">
      </div>

      <div class="col-6 card">
        <h3>Leyton Orient matches</h3>
        <p>Cheering as locals, sharing the energy of the crowd, and making football part of our routine here.</p>
        <img src="images/bucket_orient.jpg" alt="Leyton Orient match" loading="lazy" style="width:100%;border-radius:12px;margin-top:8px;">
      </div>

      <div class="col-6 card">
        <h3>Lake District trip</h3>
        <p>Hiking trails, cosy pubs for the three of us, quiet mornings ‚Äî just us, nature, and some drinks too!</p>
        <img src="images/bucket_lakedistrict.jpg" alt="Lake District" loading="lazy" style="width:100%;border-radius:12px;margin-top:8px;">
      </div>

      <div class="col-12 card">
        <h3>Open kitchen</h3>
        <p>The end of renovation and the start of a new chapter ‚Äî cooking, talking, laughing in a space we made ours.</p>
        <img src="images/bucket_kitchen.jpg" alt="Open kitchen renovation" loading="lazy" style="width:100%;border-radius:12px;margin-top:8px;">
      </div>
    </div>
  </div>
</section>



    <!-- ABOUT -->
    <section id="about" class="view hide">
      <div class="card">
        <h2>About this site</h2>
        <p>This site is my homemade project for your 28th Birthday. It took time (more than I am happy to admit), but it was built with care, love, and a bit of stubbornness. Made with simple tools and lots of patience, but above all... made for you.                Te quiero tre cime. </p>
      </div>
    </section>
  </main>

  <footer>
    Made with ‚ù§Ô∏è by Luc√≠a ¬∑ <span id="year"></span>
  </footer>

  <script>
    // 07:00 UK time if BST is in effect = 06:00 UTC example
const UNLOCK_AT = new Date('2025-09-23T07:00:00Z'); 


    // ====== Tiny router (hash-based) ======
    const tabs = Array.from(document.querySelectorAll('.tab'));
    const views = Array.from(document.querySelectorAll('.view'));
    const tabsEl = document.getElementById('tabs');

    function showView(hash){
      const id = (hash || location.hash || '#home').replace('#','');
      views.forEach(v => v.classList.toggle('hide', v.id !== id));
      tabs.forEach(t => t.setAttribute('aria-current', t.getAttribute('href') === '#' + id ? 'page' : 'false'));
      if(!location.hash) history.replaceState(null, '', '#home');
    }

    function isPreviewMode(){
  const u = new URL(location.href);
  if (u.searchParams.get('preview') === '1'){ localStorage.setItem('previewMode','1'); return true; }
  if (u.searchParams.get('preview') === '0'){ localStorage.removeItem('previewMode'); return false; }
  return localStorage.getItem('previewMode') === '1';
}

   function isLocked(){
  if (isPreviewMode()) return false;      // preview unlocks everything
  return new Date() < UNLOCK_AT;
}


    function lockUI(){
      tabsEl.classList.add('locked');
      // Force show gate, block hash navigation
      showView('#gate');
    }

    function unlockUI(){
      tabsEl.classList.remove('locked');
      showView('#home');
    }

    window.addEventListener('hashchange', () => {
      if(isLocked()){
        // Always keep user on gate until the time arrives
        history.replaceState(null, '', '#gate');
        showView('#gate');
      } else {
        showView(location.hash);
      }
    });

    // Initial lock state
    if(isLocked()) lockUI(); else unlockUI();

    // ====== Gate countdown & auto-unlock ======
    const gateEl = document.getElementById('gateCountdown');
    function gateTick(){
      const now = new Date();
      const diff = UNLOCK_AT - now;
      if(diff <= 0){
        unlockUI();
        return;
      }
      const d = Math.floor(diff/86400000);
      const h = Math.floor((diff%86400000)/3600000);
      const m = Math.floor((diff%3600000)/60000);
      gateEl.textContent = `${d}d ${h}h ${m}m`;
      // Keep trying; once it's time, unlockUI() will trigger
      setTimeout(gateTick, 30000);
    }
    if(isLocked()) gateTick();

    // ====== Confetti ======
    document.getElementById('confettiBtn')?.addEventListener('click', () => {
      for(let i=0;i<40;i++){
        const s = document.createElement('div');
        s.textContent = ['üéà','üéä','üéâ','‚ú®'][Math.floor(Math.random()*4)];
        Object.assign(s.style,{position:'fixed',left:(Math.random()*100)+'vw',top:'-10vh',fontSize:(16+Math.random()*24)+'px',transition:'transform 2.2s ease-out,opacity 2.2s',zIndex:9999});
        document.body.appendChild(s);
        requestAnimationFrame(()=>{s.style.transform=`translateY(110vh) rotate(${Math.random()*720-360}deg)`;s.style.opacity=0;});
        setTimeout(()=>s.remove(),2500);
      }
    });

    // ====== Messages ======
    const MESSAGES = [
      {name:'Luc√≠a',date:'2025-09-23',message:"Happy birthday, my love. I‚Äôm so lucky to share all these moments with you ‚Äî the little ones at home and the big adventures too. Here‚Äôs to us, to laughter, to our casita, and to everything waiting ahead"},
      {name:'Maya üêæ',date:'2025-09-23',message:"Woof, woof! Woooooof!"}
    ];
    const escapeHTML = s => String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
    document.getElementById('messageList').innerHTML = MESSAGES.map(m => `
      <div class="col-6">
        <div class="card">
          <div style="display:flex;justify-content:space-between">
            <strong>${escapeHTML(m.name)}</strong>
            <span class="subtitle">${escapeHTML(m.date)}</span>
          </div>
          <p>${escapeHTML(m.message)}</p>
        </div>
      </div>
    `).join('');

    // ====== Gallery (60 JPGs named matt_1.jpg ... matt_60.jpg), shuffled + fade-in ======
    const GALLERY_IMAGES=[...Array(60).keys()].map(i=>`images/matt_${i+1}.jpg`);
    const SHUFFLED_IMAGES = GALLERY_IMAGES.sort(() => Math.random() - 0.5);
    const BATCH_SIZE = 10;
    let galleryIndex = 0, observer;

    function renderNextBatch(){
      const gallery = document.getElementById('gallery');
      const slice = SHUFFLED_IMAGES.slice(galleryIndex, galleryIndex + BATCH_SIZE);
      slice.forEach((src,i) => {
        const wrap = document.createElement('div');
        wrap.className = 'gallery-item';
        const img = document.createElement('img');
        img.src = src;
        img.alt = 'Memory ' + (galleryIndex + i + 1);
        img.loading = 'lazy';
        img.addEventListener('load', () => img.classList.add('is-visible')); // fade-in
        wrap.appendChild(img);
        gallery.appendChild(wrap);
      });
      galleryIndex += slice.length;
      if(galleryIndex >= SHUFFLED_IMAGES.length){
        const sentinel = document.getElementById('gallery-sentinel');
        if (sentinel) sentinel.style.display = 'none';
        if (observer) observer.disconnect();
      }
    }
    // Only try to render gallery when not locked (so the gate stays clean)
    if(!isLocked()){
      renderNextBatch();
      observer = new IntersectionObserver(entries => {
        entries.forEach(e => { if(e.isIntersecting) renderNextBatch(); });
      }, { rootMargin:'400px 0px' });
      observer.observe(document.getElementById('gallery-sentinel'));
    } else {
      // When it unlocks, start the gallery
      const startGalleryAfterUnlock = setInterval(() => {
        if(!isLocked()){
          clearInterval(startGalleryAfterUnlock);
          renderNextBatch();
          observer = new IntersectionObserver(entries => {
            entries.forEach(e => { if(e.isIntersecting) renderNextBatch(); });
          }, { rootMargin:'400px 0px' });
          observer.observe(document.getElementById('gallery-sentinel'));
        }
      }, 1000);
    }

    // ====== Presents (1..15, no repeats, persisted) ======
    const STORE_KEY = 'presents_opened_v1';
    const TOTAL_PRESENTS = 15;

    function getOpened(){
      try{ return JSON.parse(localStorage.getItem(STORE_KEY)) || []; }
      catch(e){ return []; }
    }
    function setOpened(arr){
      localStorage.setItem(STORE_KEY, JSON.stringify(arr));
    }

    function getRemaining(){
      const opened = new Set(getOpened());
      return Array.from({length:TOTAL_PRESENTS}, (_,i)=>i+1).filter(n => !opened.has(n));
    }

    function drawNext(){
      const remaining = getRemaining();
      if(remaining.length === 0) return null;
      const pick = remaining[Math.floor(Math.random()*remaining.length)];
      const opened = getOpened();
      opened.push(pick);
      setOpened(opened);
      return pick;
    }

    function renderPresentsState(latest = null){
      const opened = getOpened().sort((a,b)=>a-b);
      const remaining = getRemaining();
      document.getElementById('currentPick').textContent = latest ?? '‚Äî';
      document.getElementById('openedList').textContent = opened.length ? opened.join(', ') : '‚Äî';
      document.getElementById('remainingCount').textContent = remaining.length;
    }

    document.getElementById('drawBtn')?.addEventListener('click', () => {
      const pick = drawNext();
      if(pick === null){
        document.getElementById('currentPick').textContent = 'All done! üéÅ';
      } else {
        document.getElementById('currentPick').textContent = pick;
      }
      renderPresentsState(pick ?? null);
    });

    document.getElementById('resetBtn')?.addEventListener('click', () => {
      if(confirm('Reset the presents list? (Only for Luc√≠a)')){
        localStorage.removeItem(STORE_KEY);
        renderPresentsState(null);
      }
    });

        // Initial render
    renderPresentsState(null);

    // ‚Äî‚Äî‚Äî Random facts quiz (age & numbers focused, no explanations) ‚Äî‚Äî‚Äî
    const QUIZ = [
      { q: "Roughly what fraction of a human life is spent asleep?", options: ["About one quarter","About one third","About one half"], answer: 1 },
      { q: "Average adult heartbeats per day?", options: ["~10,000","~100,000","~1,000,000"], answer: 1 },
      { q: "How many weeks are in 28 years (52 weeks/year)?", options: ["1400","1456","1500"], answer: 1 },
      { q: "Approx. life expectancy in England & Wales around 1850?", options: ["~30 years","~40 years","~55 years"], answer: 1 },
      { q: "At age 2, a child is roughly what percent of adult height?", options: ["~40%","~50%","~60%"], answer: 1 },
      { q: "Oldest confirmed human age ever recorded?", options: ["116 years","122 years","130 years"], answer: 1 },
      { q: "Oldest verified person from Spain?", options: ["Mar√≠a Branyas Morera - 117","Saturnino de la Fuente Garc√≠a - 120","Ana Mar√≠a Vela Rubio - 112"], answer: 0 },
      { q: "Oldest verified person from the UK?", options: ["Bessie Camm - 113","Charlotte Hughes - 115","Ethel May Caterham - 118"], answer: 1 },
      { q: "How many leap years are there in a typical 28-year span?", options: ["6","7","8"], answer: 1 },
      { q: "How many minutes are there in a day?", options: ["1,140","1,440","10,080"], answer: 1 }
    ];

    (function initQuiz(){
      const wrap   = document.getElementById('quizWrap');
      const scoreEl= document.getElementById('quizScore');
      const reset  = document.getElementById('quizReset');
      if(!wrap || !scoreEl) return;

      let total = 0, correct = 0;
      function updateScore(){ scoreEl.textContent = `${correct} / ${total}`; }

      function render(){
        wrap.innerHTML = '';
        total = QUIZ.length;
        correct = 0;
        updateScore();

        QUIZ.forEach((item, idx) => {
          const card = document.createElement('div');
          card.className = 'quiz-card';

          const q = document.createElement('p');
          q.className = 'quiz-q';
          q.textContent = `${idx+1}. ${item.q}`;

          const opts = document.createElement('div');
          opts.className = 'quiz-options';

          let chosen = false;
          item.options.forEach((optText, i) => {
            const btn = document.createElement('button');
            btn.type = 'button';
            btn.className = 'quiz-option';
            btn.textContent = optText;

            btn.addEventListener('click', () => {
              if (chosen) return;
              chosen = true;

              const kids = Array.from(opts.children);
              kids.forEach((b, j) => {
                if (j === item.answer) b.classList.add('correct');
                else if (j === i)      b.classList.add('wrong');
                b.disabled = true;
              });

              if (i === item.answer) correct++;
              updateScore();
            });

            opts.appendChild(btn);
          });

          card.appendChild(q);
          card.appendChild(opts);
          wrap.appendChild(card);
        });
      }

      reset?.addEventListener('click', render);
      render();
    })();

    // ‚Äî‚Äî‚Äî Optional: ripple effect on the ‚ÄúPick the next number‚Äù button ‚Äî‚Äî‚Äî
    (function fancyButton(){
      const btn = document.getElementById('drawBtn');
      if(!btn) return;
      btn.addEventListener('click', () => {
        // stop pulsing after first click
        btn.classList.remove('pulse');
        // ripple
        const r = document.createElement('span');
        r.className = 'ripple';
        btn.appendChild(r);
        r.addEventListener('animationend', () => r.remove());
      });
    })();
    
 // Fortune cookies logic
(function cookiesGame(){
  const out = document.getElementById('fortuneText');
  const buttons = Array.from(document.querySelectorAll('.cookie'));
  const reset = document.getElementById('cookiesReset');

  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      if (btn.dataset.opened === '1') return;
      btn.dataset.opened = '1';
      out.textContent = btn.dataset.msg || '‚Äî';
      btn.classList.add('pulse');          // cute micro pulse on reveal
      setTimeout(() => btn.classList.remove('pulse'), 900);
    });
  });

  reset?.addEventListener('click', () => {
    buttons.forEach(b => { b.dataset.opened = '0'; b.classList.remove('pulse'); });
    out.textContent = '‚Äî';
  });
})();

    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
  
</body>
</html>
